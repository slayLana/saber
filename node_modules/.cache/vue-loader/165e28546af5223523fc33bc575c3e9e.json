{"remainingRequest":"/Users/jiang/WorkSpace/bladex/saber/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jiang/WorkSpace/bladex/saber/src/views/aliGoods/aliGoods.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jiang/WorkSpace/bladex/saber/src/views/aliGoods/aliGoods.vue","mtime":1666151205537},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/cache-loader/dist/cjs.js","mtime":1666157453018},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/babel-loader/lib/index.js","mtime":1666157453268},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/cache-loader/dist/cjs.js","mtime":1666157453018},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/vue-loader/lib/index.js","mtime":1666157454301}],"contextDependencies":[],"result":["\n  import {getList, getDetail, add, update, remove,updateData} from \"@/api/aliGoods/aliGoods\";\n  import option from \"@/const/aliGoods/aliGoods\";\n  import {mapGetters} from \"vuex\";\n\nexport default {\n  data() {\n    return {\n      // 弹框标题\n      title: '',\n      // 是否展示弹框\n      box: false,\n      // 是否显示查询\n      search: true,\n      // 加载中\n      loading: true,\n      // 是否为查看模式\n      view: false,\n      // 查询信息\n      query: {},\n      // 分页信息\n      page: {\n        currentPage: 1,\n        pageSize: 10,\n        total: 40\n      },\n      // 表单数据\n      form: {},\n      // 选择行\n      selectionList: [],\n      // 表单配置\n      option: option,\n      // 表单列表\n      data: [],\n    }\n  },\n  mounted() {\n    this.init();\n    this.onLoad(this.page);\n  },\n  computed: {\n    ...mapGetters([\"permission\"]),\n    ids() {\n      let ids = [];\n      this.selectionList.forEach(ele => {\n        ids.push(ele.id);\n      });\n      return ids.join(\",\");\n    }\n  },\n  methods: {\n    init() {\n    },\n    searchHide() {\n      this.search = !this.search;\n    },\n    searchChange() {\n      this.onLoad(this.page);\n    },\n    searchReset() {\n      this.query = {};\n      this.page.currentPage = 1;\n      this.onLoad(this.page);\n    },\n    handleSubmit() {\n      if (!this.form.id) {\n        add(this.form).then(() => {\n          this.box = false;\n          this.onLoad(this.page);\n          this.$message({\n            type: \"success\",\n            message: \"操作成功!\"\n          });\n        });\n      } else {\n        update(this.form).then(() => {\n          this.box = false;\n          this.onLoad(this.page);\n          this.$message({\n            type: \"success\",\n            message: \"操作成功!\"\n          });\n        })\n      }\n    },\n    handleAdd() {\n      this.title = '新增'\n      this.form = {}\n      this.box = true\n    },\n    handleUpdate() {\n      if (this.selectionList.length === 0) {\n        this.$message.warning(\"请选择至少一条数据\");\n        return;\n      }\n      this.$confirm(\"确定将选择数据更新?\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      })\n        .then(() => {\n          this.loading = true;\n          return updateData(this.ids);\n        })\n        .then(() => {\n          this.selectionClear();\n          this.onLoad(this.page);\n          this.$message({\n            type: \"success\",\n            message: \"操作成功!\"\n          });\n        });\n    },\n    rowUpdate(row){\n      this.loading = true;\n      updateData(row.id).then(() => {\n        this.selectionClear();\n          this.onLoad(this.page);\n          this.$message({\n            type: \"success\",\n            message: \"操作成功!\"\n          });\n      })\n    },\n    handleView(row) {\n      this.title = '查看'\n      this.view = true;\n      this.box = true;\n      getDetail(row.id).then(res => {\n        this.form = res.data.data;\n      });\n    },\n    handleDelete() {\n      if (this.selectionList.length === 0) {\n        this.$message.warning(\"请选择至少一条数据\");\n        return;\n      }\n      this.$confirm(\"确定将选择数据删除?\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      })\n        .then(() => {\n          return remove(this.ids);\n        })\n        .then(() => {\n          this.selectionClear();\n          this.onLoad(this.page);\n          this.$message({\n            type: \"success\",\n            message: \"操作成功!\"\n          });\n        });\n    },\n    rowDel(row) {\n      this.$confirm(\"确定将选择数据删除?\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      })\n        .then(() => {\n          return remove(row.id);\n        })\n        .then(() => {\n          this.onLoad(this.page);\n          this.$message({\n            type: \"success\",\n            message: \"操作成功!\"\n          });\n        });\n    },\n    beforeClose(done) {\n      done()\n      this.form = {};\n      this.view = false;\n    },\n    selectionChange(list) {\n      this.selectionList = list;\n    },\n    selectionClear() {\n      this.selectionList = [];\n      this.$refs.table.clearSelection();\n    },\n    currentChange(currentPage) {\n      this.page.currentPage = currentPage;\n      this.onLoad(this.page);\n    },\n    sizeChange(pageSize) {\n      this.page.pageSize = pageSize;\n      this.onLoad(this.page);\n    },\n    onLoad(page, params = {}) {\n      this.loading = true;\n      getList(page.currentPage, page.pageSize, Object.assign(params, this.query)).then(res => {\n        const data = res.data.data;\n        this.page.total = data.total;\n        this.data = data.records;\n        this.loading = false;\n        this.selectionClear();\n      });\n    }\n  }\n};\n",{"version":3,"sources":["aliGoods.vue"],"names":[],"mappings":";AAgGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"aliGoods.vue","sourceRoot":"src/views/aliGoods","sourcesContent":["<template>\n  <basic-container>\n    <div class=\"avue-crud\">\n      <el-row :hidden=\"!search\" style=\"padding:5px\">\n        <!-- 查询模块 -->\n        <el-form :inline=\"true\" :size=\"option.size\" :model=\"query\">\n          <template>\n            <el-form-item label=\"字段\">\n              <el-input v-model=\"query.id\" placeholder=\"请输入\"></el-input>\n            </el-form-item>\n          </template>\n          <!-- 查询按钮 -->\n          <el-form-item>\n            <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"searchChange\">搜索</el-button>\n            <el-button icon=\"el-icon-delete\" @click=\"searchReset()\">清空</el-button>\n          </el-form-item>\n        </el-form>\n      </el-row>\n      <el-row>\n        <div class=\"avue-crud__menu\">\n          <!-- 头部左侧按钮模块 -->\n          <div class=\"avue-crud__left\">\n            <el-button :size=\"option.size\" type=\"primary\" icon=\"el-icon-plus\" @click=\"handleAdd\">新增</el-button>\n            <el-button :size=\"option.size\" type=\"danger\" icon=\"el-icon-delete\" @click=\"handleDelete\" plain>删除</el-button>\n            <el-button :size=\"option.size\" type=\"primary\"  @click=\"handleUpdate\" plain>一键更新\n            </el-button>\n          </div>\n          <!-- 头部右侧按钮模块 -->\n          <div class=\"avue-crud__right\">\n            <el-button :size=\"option.size\" icon=\"el-icon-refresh\" @click=\"searchChange\" circle></el-button>\n            <el-button :size=\"option.size\" icon=\"el-icon-search\" @click=\"searchHide\" circle></el-button>\n          </div>\n        </div>\n      </el-row>\n      <el-row>\n        <!-- 列表模块 -->\n        <el-table ref=\"table\" v-loading=\"loading\" :size=\"option.size\" @selection-change=\"selectionChange\" :data=\"data\"\n                  style=\"width: 100%\"\n                  :border=\"option.border\">\n          <el-table-column type=\"selection\" v-if=\"option.selection\" width=\"55\" align=\"center\"></el-table-column>\n          <el-table-column type=\"expand\" v-if=\"option.expand\" align=\"center\"></el-table-column>\n          <template v-for=\"(item,index) in option.column\">\n            <!-- table字段 -->\n            <el-table-column v-if=\"item.hide!==true\"\n                             :prop=\"item.prop\"\n                             :label=\"item.label\"\n                             :width=\"item.width\"\n                             :key=\"index\">\n                             <template  slot-scope=\"{row}\">\n                  <img v-if=\"item.prop == 'image' && row.image\" :src=\"row.image\" class=\"avatar\" style=\"width: 100px; height: 100px\"/>\n            \n              <template v-else>{{row[item.prop]}}</template>\n              </template>\n            </el-table-column>\n          </template>\n          <!-- 操作栏模块 -->\n          <el-table-column prop=\"menu\" label=\"操作\" :width=\"180\" align=\"center\">\n            <template slot-scope=\"{row}\">\n              <el-button :size=\"option.size\" type=\"text\" icon=\"el-icon-edit\" @click=\"rowUpdate(row)\">更新</el-button>\n              <el-button :size=\"option.size\" type=\"text\" icon=\"el-icon-delete\" @click=\"rowDel(row)\">删除</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n      </el-row>\n      <el-row>\n        <!-- 分页模块 -->\n        <el-pagination\n          align=\"right\" background\n          @size-change=\"sizeChange\"\n          @current-change=\"currentChange\"\n          :current-page=\"page.currentPage\"\n          :page-sizes=\"[10, 20, 30, 40, 50, 100]\"\n          :page-size=\"page.pageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"page.total\">\n        </el-pagination>\n      </el-row>\n      <!-- 表单模块 -->\n      <el-dialog :title=\"title\" :visible.sync=\"box\" width=\"50%\" :before-close=\"beforeClose\" append-to-body>\n        <el-form :disabled=\"view\" :size=\"option.size\" ref=\"form\" :model=\"form\" label-width=\"80px\">\n          <!-- 表单字段 -->\n          <el-form-item label=\"商品id\" prop=\"id\">\n            <el-input v-model=\"form.id\" placeholder=\"请输入\"/>\n          </el-form-item>\n        </el-form>\n        <!-- 表单按钮 -->\n        <span v-if=\"!view\" slot=\"footer\" class=\"dialog-footer\">\n          <el-button type=\"primary\" icon=\"el-icon-circle-check\" :size=\"option.size\" @click=\"handleSubmit\">提 交</el-button>\n          <el-button icon=\"el-icon-circle-close\" :size=\"option.size\" @click=\"box = false\">取 消</el-button>\n        </span>\n      </el-dialog>\n    </div>\n  </basic-container>\n</template>\n\n<script>\n  import {getList, getDetail, add, update, remove,updateData} from \"@/api/aliGoods/aliGoods\";\n  import option from \"@/const/aliGoods/aliGoods\";\n  import {mapGetters} from \"vuex\";\n\nexport default {\n  data() {\n    return {\n      // 弹框标题\n      title: '',\n      // 是否展示弹框\n      box: false,\n      // 是否显示查询\n      search: true,\n      // 加载中\n      loading: true,\n      // 是否为查看模式\n      view: false,\n      // 查询信息\n      query: {},\n      // 分页信息\n      page: {\n        currentPage: 1,\n        pageSize: 10,\n        total: 40\n      },\n      // 表单数据\n      form: {},\n      // 选择行\n      selectionList: [],\n      // 表单配置\n      option: option,\n      // 表单列表\n      data: [],\n    }\n  },\n  mounted() {\n    this.init();\n    this.onLoad(this.page);\n  },\n  computed: {\n    ...mapGetters([\"permission\"]),\n    ids() {\n      let ids = [];\n      this.selectionList.forEach(ele => {\n        ids.push(ele.id);\n      });\n      return ids.join(\",\");\n    }\n  },\n  methods: {\n    init() {\n    },\n    searchHide() {\n      this.search = !this.search;\n    },\n    searchChange() {\n      this.onLoad(this.page);\n    },\n    searchReset() {\n      this.query = {};\n      this.page.currentPage = 1;\n      this.onLoad(this.page);\n    },\n    handleSubmit() {\n      if (!this.form.id) {\n        add(this.form).then(() => {\n          this.box = false;\n          this.onLoad(this.page);\n          this.$message({\n            type: \"success\",\n            message: \"操作成功!\"\n          });\n        });\n      } else {\n        update(this.form).then(() => {\n          this.box = false;\n          this.onLoad(this.page);\n          this.$message({\n            type: \"success\",\n            message: \"操作成功!\"\n          });\n        })\n      }\n    },\n    handleAdd() {\n      this.title = '新增'\n      this.form = {}\n      this.box = true\n    },\n    handleUpdate() {\n      if (this.selectionList.length === 0) {\n        this.$message.warning(\"请选择至少一条数据\");\n        return;\n      }\n      this.$confirm(\"确定将选择数据更新?\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      })\n        .then(() => {\n          this.loading = true;\n          return updateData(this.ids);\n        })\n        .then(() => {\n          this.selectionClear();\n          this.onLoad(this.page);\n          this.$message({\n            type: \"success\",\n            message: \"操作成功!\"\n          });\n        });\n    },\n    rowUpdate(row){\n      this.loading = true;\n      updateData(row.id).then(() => {\n        this.selectionClear();\n          this.onLoad(this.page);\n          this.$message({\n            type: \"success\",\n            message: \"操作成功!\"\n          });\n      })\n    },\n    handleView(row) {\n      this.title = '查看'\n      this.view = true;\n      this.box = true;\n      getDetail(row.id).then(res => {\n        this.form = res.data.data;\n      });\n    },\n    handleDelete() {\n      if (this.selectionList.length === 0) {\n        this.$message.warning(\"请选择至少一条数据\");\n        return;\n      }\n      this.$confirm(\"确定将选择数据删除?\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      })\n        .then(() => {\n          return remove(this.ids);\n        })\n        .then(() => {\n          this.selectionClear();\n          this.onLoad(this.page);\n          this.$message({\n            type: \"success\",\n            message: \"操作成功!\"\n          });\n        });\n    },\n    rowDel(row) {\n      this.$confirm(\"确定将选择数据删除?\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      })\n        .then(() => {\n          return remove(row.id);\n        })\n        .then(() => {\n          this.onLoad(this.page);\n          this.$message({\n            type: \"success\",\n            message: \"操作成功!\"\n          });\n        });\n    },\n    beforeClose(done) {\n      done()\n      this.form = {};\n      this.view = false;\n    },\n    selectionChange(list) {\n      this.selectionList = list;\n    },\n    selectionClear() {\n      this.selectionList = [];\n      this.$refs.table.clearSelection();\n    },\n    currentChange(currentPage) {\n      this.page.currentPage = currentPage;\n      this.onLoad(this.page);\n    },\n    sizeChange(pageSize) {\n      this.page.pageSize = pageSize;\n      this.onLoad(this.page);\n    },\n    onLoad(page, params = {}) {\n      this.loading = true;\n      getList(page.currentPage, page.pageSize, Object.assign(params, this.query)).then(res => {\n        const data = res.data.data;\n        this.page.total = data.total;\n        this.data = data.records;\n        this.loading = false;\n        this.selectionClear();\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.el-pagination {\n  margin-top: 20px;\n}\n</style>\n"]}]}