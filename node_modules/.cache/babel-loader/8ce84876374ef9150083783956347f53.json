{"remainingRequest":"/Users/jiang/WorkSpace/bladex/saber/node_modules/babel-loader/lib/index.js!/Users/jiang/WorkSpace/bladex/saber/node_modules/eslint-loader/index.js??ref--13-0!/Users/jiang/WorkSpace/bladex/saber/src/store/modules/user.js","dependencies":[{"path":"/Users/jiang/WorkSpace/bladex/saber/src/store/modules/user.js","mtime":1666151205530},{"path":"/Users/jiang/WorkSpace/bladex/saber/babel.config.js","mtime":1666151205448},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/cache-loader/dist/cjs.js","mtime":1666157453018},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/babel-loader/lib/index.js","mtime":1666157453268},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/eslint-loader/index.js","mtime":1666157452476}],"contextDependencies":[],"result":["import _typeof from \"/Users/jiang/WorkSpace/bladex/saber/node_modules/@babel/runtime-corejs2/helpers/esm/typeof.js\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/web.dom.iterable\";\nimport { setToken, setRefreshToken, removeToken, removeRefreshToken } from '@/util/auth';\nimport { Message } from 'element-ui';\nimport { setStore, getStore } from '@/util/store';\nimport { isURL, validatenull } from '@/util/validate';\nimport { deepClone } from '@/util/util';\nimport website from '@/config/website';\nimport { loginByUsername, loginBySocial, loginBySso, getUserInfo, logout, refreshToken as _refreshToken, getButtons } from '@/api/user';\nimport { getTopMenu, getRoutes } from '@/api/system/menu';\nimport md5 from 'js-md5';\n\nfunction addPath(ele, first) {\n  var menu = website.menu;\n  var propsConfig = menu.props;\n  var propsDefault = {\n    label: propsConfig.label || 'name',\n    path: propsConfig.path || 'path',\n    icon: propsConfig.icon || 'icon',\n    children: propsConfig.children || 'children'\n  };\n  var icon = ele[propsDefault.icon];\n  ele[propsDefault.icon] = validatenull(icon) ? menu.iconDefault : icon;\n  var isChild = ele[propsDefault.children] && ele[propsDefault.children].length !== 0;\n  if (!isChild) ele[propsDefault.children] = [];\n\n  if (!isChild && first && !isURL(ele[propsDefault.path])) {\n    ele[propsDefault.path] = ele[propsDefault.path] + '/index';\n  } else {\n    ele[propsDefault.children].forEach(function (child) {\n      addPath(child);\n    });\n  }\n}\n\nvar user = {\n  state: {\n    tenantId: getStore({\n      name: 'tenantId'\n    }) || '',\n    userInfo: getStore({\n      name: 'userInfo'\n    }) || [],\n    permission: getStore({\n      name: 'permission'\n    }) || {},\n    roles: [],\n    menuId: {},\n    menu: getStore({\n      name: 'menu'\n    }) || [],\n    menuAll: getStore({\n      name: 'menuAll'\n    }) || [],\n    token: getStore({\n      name: 'token'\n    }) || '',\n    refreshToken: getStore({\n      name: 'refreshToken'\n    }) || ''\n  },\n  actions: {\n    //根据用户名登录\n    LoginByUsername: function LoginByUsername(_ref, userInfo) {\n      var commit = _ref.commit;\n      return new Promise(function (resolve, reject) {\n        loginByUsername(userInfo.tenantId, userInfo.deptId, userInfo.roleId, userInfo.username, md5(userInfo.password), userInfo.type, userInfo.key, userInfo.code).then(function (res) {\n          var data = res.data;\n\n          if (data.error_description) {\n            Message({\n              message: data.error_description,\n              type: 'error'\n            });\n          } else {\n            commit('SET_TOKEN', data.access_token);\n            commit('SET_REFRESH_TOKEN', data.refresh_token);\n            commit('SET_TENANT_ID', data.tenant_id);\n            commit('SET_USER_INFO', data);\n            commit('DEL_ALL_TAG');\n            commit('CLEAR_LOCK');\n          }\n\n          resolve();\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    },\n    //根据手机号登录\n    LoginByPhone: function LoginByPhone(_ref2, userInfo) {\n      var commit = _ref2.commit;\n      return new Promise(function (resolve) {\n        loginByUsername(userInfo.phone, userInfo.code).then(function (res) {\n          var data = res.data.data;\n          commit('SET_TOKEN', data);\n          commit('DEL_ALL_TAG');\n          commit('CLEAR_LOCK');\n          resolve();\n        });\n      });\n    },\n    //根据第三方信息登录\n    LoginBySocial: function LoginBySocial(_ref3, userInfo) {\n      var commit = _ref3.commit;\n      return new Promise(function (resolve) {\n        loginBySocial(userInfo.tenantId, userInfo.source, userInfo.code, userInfo.state).then(function (res) {\n          var data = res.data;\n\n          if (data.error_description) {\n            Message({\n              message: data.error_description,\n              type: 'error'\n            });\n          } else {\n            commit('SET_TOKEN', data.access_token);\n            commit('SET_REFRESH_TOKEN', data.refresh_token);\n            commit('SET_USER_INFO', data);\n            commit('SET_TENANT_ID', data.tenant_id);\n            commit('DEL_ALL_TAG');\n            commit('CLEAR_LOCK');\n          }\n\n          resolve();\n        });\n      });\n    },\n    //根据单点信息登录\n    LoginBySso: function LoginBySso(_ref4, userInfo) {\n      var commit = _ref4.commit;\n      return new Promise(function (resolve) {\n        loginBySso(userInfo.state, userInfo.code).then(function (res) {\n          var data = res.data;\n\n          if (data.error_description) {\n            Message({\n              message: data.error_description,\n              type: 'error'\n            });\n          } else {\n            commit('SET_TOKEN', data.access_token);\n            commit('SET_REFRESH_TOKEN', data.refresh_token);\n            commit('SET_USER_INFO', data);\n            commit('SET_TENANT_ID', data.tenant_id);\n            commit('DEL_ALL_TAG');\n            commit('CLEAR_LOCK');\n          }\n\n          resolve();\n        });\n      });\n    },\n    //获取用户信息\n    GetUserInfo: function GetUserInfo(_ref5) {\n      var commit = _ref5.commit;\n      return new Promise(function (resolve, reject) {\n        getUserInfo().then(function (res) {\n          var data = res.data.data;\n          commit('SET_ROLES', data.roles);\n          resolve(data);\n        }).catch(function (err) {\n          reject(err);\n        });\n      });\n    },\n    //刷新token\n    refreshToken: function refreshToken(_ref6, userInfo) {\n      var state = _ref6.state,\n          commit = _ref6.commit;\n      window.console.log('handle refresh token');\n      return new Promise(function (resolve, reject) {\n        _refreshToken(state.refreshToken, state.tenantId, !validatenull(userInfo) ? userInfo.deptId : state.userInfo.dept_id, !validatenull(userInfo) ? userInfo.roleId : state.userInfo.role_id).then(function (res) {\n          var data = res.data;\n          commit('SET_TOKEN', data.access_token);\n          commit('SET_REFRESH_TOKEN', data.refresh_token);\n          commit('SET_USER_INFO', data);\n          resolve();\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    },\n    // 登出\n    LogOut: function LogOut(_ref7) {\n      var commit = _ref7.commit;\n      return new Promise(function (resolve, reject) {\n        logout().then(function () {\n          commit('SET_TOKEN', '');\n          commit('SET_MENU', []);\n          commit('SET_MENU_ALL_NULL', []);\n          commit('SET_ROLES', []);\n          commit('SET_TAG_LIST', []);\n          commit('DEL_ALL_TAG');\n          commit('CLEAR_LOCK');\n          removeToken();\n          removeRefreshToken();\n          resolve();\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    },\n    //注销session\n    FedLogOut: function FedLogOut(_ref8) {\n      var commit = _ref8.commit;\n      return new Promise(function (resolve) {\n        commit('SET_TOKEN', '');\n        commit('SET_MENU_ALL_NULL', []);\n        commit('SET_MENU', []);\n        commit('SET_ROLES', []);\n        commit('SET_TAG_LIST', []);\n        commit('DEL_ALL_TAG');\n        commit('CLEAR_LOCK');\n        removeToken();\n        removeRefreshToken();\n        resolve();\n      });\n    },\n    //获取顶部菜单\n    GetTopMenu: function GetTopMenu() {\n      return new Promise(function (resolve) {\n        getTopMenu().then(function (res) {\n          var data = res.data.data || [];\n          resolve(data);\n        });\n      });\n    },\n    //获取系统菜单\n    GetMenu: function GetMenu(_ref9, topMenuId) {\n      var commit = _ref9.commit,\n          dispatch = _ref9.dispatch;\n      return new Promise(function (resolve) {\n        getRoutes(topMenuId).then(function (res) {\n          var data = res.data.data;\n          var menu = deepClone(data);\n          menu.forEach(function (ele) {\n            addPath(ele, true);\n          });\n          commit('SET_MENU_ALL', menu);\n          commit('SET_MENU', menu);\n          dispatch('GetButtons');\n          resolve(menu);\n        });\n      });\n    },\n    //获取系统按钮\n    GetButtons: function GetButtons(_ref10) {\n      var commit = _ref10.commit;\n      return new Promise(function (resolve) {\n        getButtons().then(function (res) {\n          var data = res.data.data;\n          commit('SET_PERMISSION', data);\n          resolve();\n        });\n      });\n    }\n  },\n  mutations: {\n    SET_TOKEN: function SET_TOKEN(state, token) {\n      setToken(token);\n      state.token = token;\n      setStore({\n        name: 'token',\n        content: state.token\n      });\n    },\n    SET_MENU_ID: function SET_MENU_ID(state, menuId) {\n      state.menuId = menuId;\n    },\n    SET_MENU_ALL: function SET_MENU_ALL(state, menuAll) {\n      var menu = state.menuAll;\n      menuAll.forEach(function (ele) {\n        if (!menu.find(function (item) {\n          return item.label === ele.label && item.path === ele.path;\n        })) {\n          menu.push(ele);\n        }\n      });\n      state.menuAll = menu;\n      setStore({\n        name: 'menuAll',\n        content: state.menuAll\n      });\n    },\n    SET_MENU_ALL_NULL: function SET_MENU_ALL_NULL(state) {\n      state.menuAll = [];\n      setStore({\n        name: 'menuAll',\n        content: state.menuAll\n      });\n    },\n    SET_MENU: function SET_MENU(state, menu) {\n      state.menu = menu;\n      setStore({\n        name: 'menu',\n        content: state.menu\n      });\n    },\n    SET_REFRESH_TOKEN: function SET_REFRESH_TOKEN(state, refreshToken) {\n      setRefreshToken(refreshToken);\n      state.refreshToken = refreshToken;\n      setStore({\n        name: 'refreshToken',\n        content: state.refreshToken\n      });\n    },\n    SET_TENANT_ID: function SET_TENANT_ID(state, tenantId) {\n      state.tenantId = tenantId;\n      setStore({\n        name: 'tenantId',\n        content: state.tenantId\n      });\n    },\n    SET_USER_INFO: function SET_USER_INFO(state, userInfo) {\n      if (validatenull(userInfo.avatar)) {\n        userInfo.avatar = \"/img/bg/img-logo.png\";\n      }\n\n      state.userInfo = userInfo;\n      setStore({\n        name: 'userInfo',\n        content: state.userInfo\n      });\n    },\n    SET_ROLES: function SET_ROLES(state, roles) {\n      state.roles = roles;\n    },\n    SET_PERMISSION: function SET_PERMISSION(state, permission) {\n      var result = [];\n\n      function getCode(list) {\n        list.forEach(function (ele) {\n          if (_typeof(ele) === 'object') {\n            var chiildren = ele.children;\n            var code = ele.code;\n\n            if (chiildren) {\n              getCode(chiildren);\n            } else {\n              result.push(code);\n            }\n          }\n        });\n      }\n\n      getCode(permission);\n      state.permission = {};\n      result.forEach(function (ele) {\n        state.permission[ele] = true;\n      });\n      setStore({\n        name: 'permission',\n        content: state.permission\n      });\n    }\n  }\n};\nexport default user;",{"version":3,"names":["setToken","setRefreshToken","removeToken","removeRefreshToken","Message","setStore","getStore","isURL","validatenull","deepClone","website","loginByUsername","loginBySocial","loginBySso","getUserInfo","logout","refreshToken","getButtons","getTopMenu","getRoutes","md5","addPath","ele","first","menu","propsConfig","props","propsDefault","label","path","icon","children","iconDefault","isChild","length","forEach","child","user","state","tenantId","name","userInfo","permission","roles","menuId","menuAll","token","actions","LoginByUsername","commit","Promise","resolve","reject","deptId","roleId","username","password","type","key","code","then","res","data","error_description","message","access_token","refresh_token","tenant_id","catch","error","LoginByPhone","phone","LoginBySocial","source","LoginBySso","GetUserInfo","err","window","console","log","dept_id","role_id","LogOut","FedLogOut","GetTopMenu","GetMenu","topMenuId","dispatch","GetButtons","mutations","SET_TOKEN","content","SET_MENU_ID","SET_MENU_ALL","find","item","push","SET_MENU_ALL_NULL","SET_MENU","SET_REFRESH_TOKEN","SET_TENANT_ID","SET_USER_INFO","avatar","SET_ROLES","SET_PERMISSION","result","getCode","list","chiildren"],"sources":["/Users/jiang/WorkSpace/bladex/saber/src/store/modules/user.js"],"sourcesContent":["import {setToken, setRefreshToken, removeToken, removeRefreshToken} from '@/util/auth'\nimport {Message} from 'element-ui'\nimport {setStore, getStore} from '@/util/store'\nimport {isURL, validatenull} from '@/util/validate'\nimport {deepClone} from '@/util/util'\nimport website from '@/config/website'\nimport {loginByUsername, loginBySocial, loginBySso, getUserInfo, logout, refreshToken, getButtons} from '@/api/user'\nimport {getTopMenu, getRoutes} from '@/api/system/menu'\nimport md5 from 'js-md5'\n\n\nfunction addPath(ele, first) {\n  const menu = website.menu;\n  const propsConfig = menu.props;\n  const propsDefault = {\n    label: propsConfig.label || 'name',\n    path: propsConfig.path || 'path',\n    icon: propsConfig.icon || 'icon',\n    children: propsConfig.children || 'children'\n  }\n  const icon = ele[propsDefault.icon];\n  ele[propsDefault.icon] = validatenull(icon) ? menu.iconDefault : icon;\n  const isChild = ele[propsDefault.children] && ele[propsDefault.children].length !== 0;\n  if (!isChild) ele[propsDefault.children] = [];\n  if (!isChild && first && !isURL(ele[propsDefault.path])) {\n    ele[propsDefault.path] = ele[propsDefault.path] + '/index'\n  } else {\n    ele[propsDefault.children].forEach(child => {\n      addPath(child);\n    })\n  }\n\n}\n\nconst user = {\n  state: {\n    tenantId: getStore({name: 'tenantId'}) || '',\n    userInfo: getStore({name: 'userInfo'}) || [],\n    permission: getStore({name: 'permission'}) || {},\n    roles: [],\n    menuId: {},\n    menu: getStore({name: 'menu'}) || [],\n    menuAll: getStore({name: 'menuAll'}) || [],\n    token: getStore({name: 'token'}) || '',\n    refreshToken: getStore({name: 'refreshToken'}) || '',\n  },\n  actions: {\n    //根据用户名登录\n    LoginByUsername({commit}, userInfo) {\n      return new Promise((resolve, reject) => {\n        loginByUsername(userInfo.tenantId, userInfo.deptId, userInfo.roleId, userInfo.username, md5(userInfo.password), userInfo.type, userInfo.key, userInfo.code).then(res => {\n          const data = res.data;\n          if (data.error_description) {\n            Message({\n              message: data.error_description,\n              type: 'error'\n            })\n          } else {\n            commit('SET_TOKEN', data.access_token);\n            commit('SET_REFRESH_TOKEN', data.refresh_token);\n            commit('SET_TENANT_ID', data.tenant_id);\n            commit('SET_USER_INFO', data);\n            commit('DEL_ALL_TAG');\n            commit('CLEAR_LOCK');\n          }\n          resolve();\n        }).catch(error => {\n          reject(error);\n        })\n      })\n    },\n    //根据手机号登录\n    LoginByPhone({commit}, userInfo) {\n      return new Promise((resolve) => {\n        loginByUsername(userInfo.phone, userInfo.code).then(res => {\n          const data = res.data.data;\n          commit('SET_TOKEN', data);\n          commit('DEL_ALL_TAG');\n          commit('CLEAR_LOCK');\n          resolve();\n        })\n      })\n    },\n    //根据第三方信息登录\n    LoginBySocial({commit}, userInfo) {\n      return new Promise((resolve) => {\n        loginBySocial(userInfo.tenantId, userInfo.source, userInfo.code, userInfo.state).then(res => {\n          const data = res.data;\n          if (data.error_description) {\n            Message({\n              message: data.error_description,\n              type: 'error'\n            })\n          } else {\n            commit('SET_TOKEN', data.access_token);\n            commit('SET_REFRESH_TOKEN', data.refresh_token);\n            commit('SET_USER_INFO', data);\n            commit('SET_TENANT_ID', data.tenant_id);\n            commit('DEL_ALL_TAG');\n            commit('CLEAR_LOCK');\n          }\n          resolve();\n        })\n      })\n    },\n    //根据单点信息登录\n    LoginBySso({commit}, userInfo) {\n      return new Promise((resolve) => {\n        loginBySso(userInfo.state, userInfo.code).then(res => {\n          const data = res.data;\n          if (data.error_description) {\n            Message({\n              message: data.error_description,\n              type: 'error'\n            })\n          } else {\n            commit('SET_TOKEN', data.access_token);\n            commit('SET_REFRESH_TOKEN', data.refresh_token);\n            commit('SET_USER_INFO', data);\n            commit('SET_TENANT_ID', data.tenant_id);\n            commit('DEL_ALL_TAG');\n            commit('CLEAR_LOCK');\n          }\n          resolve();\n        })\n      })\n    },\n    //获取用户信息\n    GetUserInfo({commit}) {\n      return new Promise((resolve, reject) => {\n        getUserInfo().then((res) => {\n          const data = res.data.data;\n          commit('SET_ROLES', data.roles);\n          resolve(data);\n        }).catch(err => {\n          reject(err);\n        })\n      })\n    },\n    //刷新token\n    refreshToken({state, commit}, userInfo) {\n      window.console.log('handle refresh token');\n      return new Promise((resolve, reject) => {\n        refreshToken(state.refreshToken, state.tenantId,\n          !validatenull(userInfo) ? userInfo.deptId : state.userInfo.dept_id,\n          !validatenull(userInfo) ? userInfo.roleId : state.userInfo.role_id\n        ).then(res => {\n          const data = res.data;\n          commit('SET_TOKEN', data.access_token);\n          commit('SET_REFRESH_TOKEN', data.refresh_token);\n          commit('SET_USER_INFO', data);\n          resolve();\n        }).catch(error => {\n          reject(error)\n        })\n      })\n    },\n    // 登出\n    LogOut({commit}) {\n      return new Promise((resolve, reject) => {\n        logout().then(() => {\n          commit('SET_TOKEN', '');\n          commit('SET_MENU', []);\n          commit('SET_MENU_ALL_NULL', []);\n          commit('SET_ROLES', []);\n          commit('SET_TAG_LIST', []);\n          commit('DEL_ALL_TAG');\n          commit('CLEAR_LOCK');\n          removeToken();\n          removeRefreshToken();\n          resolve();\n        }).catch(error => {\n          reject(error)\n        })\n      })\n    },\n    //注销session\n    FedLogOut({commit}) {\n      return new Promise(resolve => {\n        commit('SET_TOKEN', '');\n        commit('SET_MENU_ALL_NULL', []);\n        commit('SET_MENU', []);\n        commit('SET_ROLES', []);\n        commit('SET_TAG_LIST', []);\n        commit('DEL_ALL_TAG');\n        commit('CLEAR_LOCK');\n        removeToken();\n        removeRefreshToken();\n        resolve();\n      })\n    },\n    //获取顶部菜单\n    GetTopMenu() {\n      return new Promise(resolve => {\n        getTopMenu().then((res) => {\n          const data = res.data.data || [];\n          resolve(data)\n        })\n      })\n    },\n    //获取系统菜单\n    GetMenu({commit, dispatch}, topMenuId) {\n      return new Promise(resolve => {\n        getRoutes(topMenuId).then((res) => {\n          const data = res.data.data\n          let menu = deepClone(data);\n          menu.forEach(ele => {\n            addPath(ele, true);\n          });\n          commit('SET_MENU_ALL', menu)\n          commit('SET_MENU', menu)\n          dispatch('GetButtons');\n          resolve(menu)\n        })\n      })\n    },\n    //获取系统按钮\n    GetButtons({commit}) {\n      return new Promise((resolve) => {\n        getButtons().then(res => {\n          const data = res.data.data;\n          commit('SET_PERMISSION', data);\n          resolve();\n        })\n      })\n    },\n  },\n  mutations: {\n    SET_TOKEN: (state, token) => {\n      setToken(token);\n      state.token = token;\n      setStore({name: 'token', content: state.token})\n    },\n    SET_MENU_ID(state, menuId) {\n      state.menuId = menuId;\n    },\n    SET_MENU_ALL: (state, menuAll) => {\n      let menu = state.menuAll;\n      menuAll.forEach(ele => {\n        if (!menu.find(item => item.label === ele.label && item.path === ele.path)) {\n          menu.push(ele);\n        }\n      })\n      state.menuAll = menu\n      setStore({ name: 'menuAll', content: state.menuAll })\n    },\n    SET_MENU_ALL_NULL: (state) => {\n      state.menuAll = []\n      setStore({ name: 'menuAll', content: state.menuAll })\n    },\n    SET_MENU: (state, menu) => {\n      state.menu = menu\n      setStore({ name: 'menu', content: state.menu })\n    },\n    SET_REFRESH_TOKEN: (state, refreshToken) => {\n      setRefreshToken(refreshToken)\n      state.refreshToken = refreshToken;\n      setStore({name: 'refreshToken', content: state.refreshToken})\n    },\n    SET_TENANT_ID: (state, tenantId) => {\n      state.tenantId = tenantId;\n      setStore({name: 'tenantId', content: state.tenantId})\n    },\n    SET_USER_INFO: (state, userInfo) => {\n      if (validatenull(userInfo.avatar)) {\n        userInfo.avatar = \"/img/bg/img-logo.png\";\n      }\n      state.userInfo = userInfo;\n      setStore({name: 'userInfo', content: state.userInfo})\n    },\n    SET_ROLES: (state, roles) => {\n      state.roles = roles;\n    },\n    SET_PERMISSION: (state, permission) => {\n      let result = [];\n\n      function getCode(list) {\n        list.forEach(ele => {\n          if (typeof (ele) === 'object') {\n            const chiildren = ele.children;\n            const code = ele.code;\n            if (chiildren) {\n              getCode(chiildren)\n            } else {\n              result.push(code);\n            }\n          }\n        })\n      }\n\n      getCode(permission);\n      state.permission = {};\n      result.forEach(ele => {\n        state.permission[ele] = true;\n      });\n      setStore({name: 'permission', content: state.permission})\n    }\n  }\n\n}\nexport default user\n"],"mappings":"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"}]}