{"remainingRequest":"/Users/jiang/WorkSpace/bladex/saber/node_modules/babel-loader/lib/index.js!/Users/jiang/WorkSpace/bladex/saber/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jiang/WorkSpace/bladex/saber/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jiang/WorkSpace/bladex/saber/src/page/login/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jiang/WorkSpace/bladex/saber/src/page/login/index.vue","mtime":1666246978224},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/cache-loader/dist/cjs.js","mtime":1666157453018},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/babel-loader/lib/index.js","mtime":1666157453268},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/cache-loader/dist/cjs.js","mtime":1666157453018},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/vue-loader/lib/index.js","mtime":1666157454301},{"path":"/Users/jiang/WorkSpace/bladex/saber/babel.config.js","mtime":1666151205448},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/cache-loader/dist/cjs.js","mtime":1666157453018},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/babel-loader/lib/index.js","mtime":1666157453268},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/cache-loader/dist/cjs.js","mtime":1666157453018},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/vue-loader/lib/index.js","mtime":1666157454301}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _defineProperty from \"/Users/jiang/WorkSpace/bladex/saber/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport userLogin from \"./userlogin\";\nimport codeLogin from \"./codelogin\";\nimport thirdLogin from \"./thirdlogin\";\nimport { mapGetters } from \"vuex\";\nimport { dateFormat } from \"@/util/date\";\nimport { validatenull } from \"@/util/validate\";\nimport topLang from \"@/page/index/top/top-lang\";\nimport topColor from \"@/page/index/top/top-color\";\nimport { getQueryString, getTopUrl } from \"@/util/util\";\nexport default {\n  name: \"login\",\n  components: {\n    userLogin: userLogin,\n    codeLogin: codeLogin,\n    thirdLogin: thirdLogin,\n    topLang: topLang,\n    topColor: topColor\n  },\n  data: function data() {\n    return {\n      time: \"\",\n      activeName: \"user\",\n      socialForm: {\n        tenantId: \"000000\",\n        source: \"\",\n        code: \"\",\n        state: \"\"\n      }\n    };\n  },\n  watch: {\n    $route: function $route() {\n      this.handleLogin();\n    }\n  },\n  created: function created() {\n    this.handleLogin();\n    this.getTime();\n  },\n  mounted: function mounted() {},\n  computed: _objectSpread({}, mapGetters([\"website\", \"tagWel\"])),\n  props: [],\n  methods: {\n    getTime: function getTime() {\n      var _this = this;\n\n      setInterval(function () {\n        _this.time = dateFormat(new Date());\n      }, 1000);\n    },\n    handleLogin: function handleLogin() {\n      var _this2 = this;\n\n      var topUrl = getTopUrl();\n      var redirectUrl = \"/oauth/redirect/\";\n      var ssoCode = \"?code=\";\n      this.socialForm.source = getQueryString(\"source\");\n      this.socialForm.code = getQueryString(\"code\");\n      this.socialForm.state = getQueryString(\"state\");\n\n      if (validatenull(this.socialForm.source) && topUrl.includes(redirectUrl)) {\n        var source = topUrl.split(\"?\")[0];\n        source = source.split(redirectUrl)[1];\n        this.socialForm.source = source;\n      }\n\n      if (topUrl.includes(redirectUrl) && !validatenull(this.socialForm.source) && !validatenull(this.socialForm.code) && !validatenull(this.socialForm.state)) {\n        var loading = this.$loading({\n          lock: true,\n          text: '第三方系统登录中,请稍后。。。',\n          spinner: \"el-icon-loading\"\n        });\n        this.$store.dispatch(\"LoginBySocial\", this.socialForm).then(function () {\n          window.location.href = topUrl.split(redirectUrl)[0];\n\n          _this2.$router.push({\n            path: _this2.tagWel.value\n          });\n\n          loading.close();\n        }).catch(function () {\n          loading.close();\n        });\n      } else if (!topUrl.includes(redirectUrl) && !validatenull(this.socialForm.code) && !validatenull(this.socialForm.state)) {\n        var _loading = this.$loading({\n          lock: true,\n          text: '单点系统登录中,请稍后。。。',\n          spinner: \"el-icon-loading\"\n        });\n\n        this.$store.dispatch(\"LoginBySso\", this.socialForm).then(function () {\n          window.location.href = topUrl.split(ssoCode)[0];\n\n          _this2.$router.push({\n            path: _this2.tagWel.value\n          });\n\n          _loading.close();\n        }).catch(function () {\n          _loading.close();\n        });\n      }\n    }\n  }\n};",{"version":3,"mappings":";;;;;;;;;;;;AAwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;EACAA,aADA;EAEAC;IACAC,oBADA;IAEAC,oBAFA;IAGAC,sBAHA;IAIAC,gBAJA;IAKAC;EALA,CAFA;EASAC,IATA,kBASA;IACA;MACAC,QADA;MAEAC,kBAFA;MAGAC;QACAC,kBADA;QAEAC,UAFA;QAGAC,QAHA;QAIAC;MAJA;IAHA;EAUA,CApBA;EAqBAC;IACAC,MADA,oBACA;MACA;IACA;EAHA,CArBA;EA0BAC,OA1BA,qBA0BA;IACA;IACA;EACA,CA7BA;EA8BAC,OA9BA,qBA8BA,CACA,CA/BA;EAgCAC,4BACAC,iCADA,CAhCA;EAmCAC,SAnCA;EAoCAC;IACAC,OADA,qBACA;MAAA;;MACAC;QACA;MACA,CAFA,EAEA,IAFA;IAGA,CALA;IAMAC,WANA,yBAMA;MAAA;;MACA;MACA;MACA;MACA;MACA;MACA;;MACA;QACA;QACAb;QACA;MACA;;MACA;QACA;UACAc,UADA;UAEAC,uBAFA;UAGAC;QAHA;QAKA;UACAC;;UACA;YAAAC;UAAA;;UACAC;QACA,CAJA,EAIAC,KAJA,CAIA;UACAD;QACA,CANA;MAOA,CAbA,MAaA;QACA;UACAL,UADA;UAEAC,sBAFA;UAGAC;QAHA;;QAKA;UACAC;;UACA;YAAAC;UAAA;;UACAC;QACA,CAJA,EAIAC,KAJA,CAIA;UACAD;QACA,CANA;MAOA;IACA;EA7CA;AApCA","names":["name","components","userLogin","codeLogin","thirdLogin","topLang","topColor","data","time","activeName","socialForm","tenantId","source","code","state","watch","$route","created","mounted","computed","mapGetters","props","methods","getTime","setInterval","handleLogin","lock","text","spinner","window","path","loading","catch"],"sourceRoot":"src/page/login","sources":["index.vue"],"sourcesContent":["<template>\n  <div class=\"login-container\"\n       ref=\"login\"\n       @keyup.enter.native=\"handleLogin\">\n    <top-color v-show=\"false\"></top-color>\n    <div class=\"login-weaper animated bounceInDown\">\n      <div class=\"login-left\">\n        <div class=\"login-time\">\n          {{time}}\n        </div>\n        <!-- <p class=\"title\">{{ $t('login.info') }}</p> -->\n        <!-- <div style=\"font-size: 15px\"> -->\n          <!-- <span>----------------------------------------------</span> -->\n          <!-- <br>\n          <span>管理租户编号：000000</span>\n          <br>\n          <span>超级管理员账号: admin / admin</span>\n          <br>\n          <span>人事账号: hr / hr</span>\n          <br>\n          <span>经理账号: manager / manager</span>\n          <br>\n          <span>老板账号: boss / boss</span>\n          <br>\n          <span>----------------------------------------------</span>\n          <br>\n          <span>普通租户编号：详见租户管理模块</span>\n          <br>\n          <span>租户管理员账号: admin / admin</span>\n          <br> -->\n          <!-- <span>----------------------------------------------</span> -->\n        <!-- </div> -->\n      <!-- <img class=\"img\" src=\"/img/logo.png\" alt=\"\"> -->\n      </div>\n      <div class=\"login-border\">\n        <div class=\"login-main\">\n          <h4 class=\"login-title\">\n            {{ $t('login.title') }}{{website.title}}\n            <top-lang></top-lang>\n          </h4>\n          <userLogin v-if=\"activeName==='user'\"></userLogin>\n          <codeLogin v-else-if=\"activeName==='code'\"></codeLogin>\n          <thirdLogin v-else-if=\"activeName==='third'\"></thirdLogin>\n          <div class=\"login-menu\">\n            <a href=\"#\" @click.stop=\"activeName='user'\">{{ $t('login.userLogin') }}</a>\n            <!--<a href=\"#\" @click.stop=\"activeName='code'\">{{ $t('login.phoneLogin') }}</a>-->\n            <a href=\"#\" @click.stop=\"activeName='third'\">{{ $t('login.thirdLogin') }}</a>\n            <a :href=\"website.ssoUrl + website.redirectUri\">{{ $t('login.ssoLogin') }}</a>\n          </div>\n        </div>\n\n      </div>\n    </div>\n  </div>\n</template>\n<script>\n  import userLogin from \"./userlogin\";\n  import codeLogin from \"./codelogin\";\n  import thirdLogin from \"./thirdlogin\";\n  import {mapGetters} from \"vuex\";\n  import {dateFormat} from \"@/util/date\";\n  import {validatenull} from \"@/util/validate\";\n  import topLang from \"@/page/index/top/top-lang\";\n  import topColor from \"@/page/index/top/top-color\";\n  import {getQueryString, getTopUrl} from \"@/util/util\";\n\n  export default {\n    name: \"login\",\n    components: {\n      userLogin,\n      codeLogin,\n      thirdLogin,\n      topLang,\n      topColor\n    },\n    data() {\n      return {\n        time: \"\",\n        activeName: \"user\",\n        socialForm: {\n          tenantId: \"000000\",\n          source: \"\",\n          code: \"\",\n          state: \"\",\n        }\n      };\n    },\n    watch: {\n      $route() {\n        this.handleLogin();\n      }\n    },\n    created() {\n      this.handleLogin();\n      this.getTime();\n    },\n    mounted() {\n    },\n    computed: {\n      ...mapGetters([\"website\", \"tagWel\"])\n    },\n    props: [],\n    methods: {\n      getTime() {\n        setInterval(() => {\n          this.time = dateFormat(new Date());\n        }, 1000);\n      },\n      handleLogin() {\n        const topUrl = getTopUrl();\n        const redirectUrl = \"/oauth/redirect/\";\n        const ssoCode = \"?code=\";\n        this.socialForm.source = getQueryString(\"source\");\n        this.socialForm.code = getQueryString(\"code\");\n        this.socialForm.state = getQueryString(\"state\");\n        if (validatenull(this.socialForm.source) && topUrl.includes(redirectUrl)) {\n          let source = topUrl.split(\"?\")[0];\n          source = source.split(redirectUrl)[1];\n          this.socialForm.source = source;\n        }\n        if (topUrl.includes(redirectUrl) && !validatenull(this.socialForm.source) && !validatenull(this.socialForm.code) && !validatenull(this.socialForm.state)) {\n          const loading = this.$loading({\n            lock: true,\n            text: '第三方系统登录中,请稍后。。。',\n            spinner: \"el-icon-loading\"\n          });\n          this.$store.dispatch(\"LoginBySocial\", this.socialForm).then(() => {\n            window.location.href = topUrl.split(redirectUrl)[0];\n            this.$router.push({path: this.tagWel.value});\n            loading.close();\n          }).catch(() => {\n            loading.close();\n          });\n        } else if (!topUrl.includes(redirectUrl) && !validatenull(this.socialForm.code) && !validatenull(this.socialForm.state)) {\n          const loading = this.$loading({\n            lock: true,\n            text: '单点系统登录中,请稍后。。。',\n            spinner: \"el-icon-loading\"\n          });\n          this.$store.dispatch(\"LoginBySso\", this.socialForm).then(() => {\n            window.location.href = topUrl.split(ssoCode)[0];\n            this.$router.push({path: this.tagWel.value});\n            loading.close();\n          }).catch(() => {\n            loading.close();\n          });\n        }\n      }\n    }\n  };\n</script>\n\n<style lang=\"scss\">\n  @import \"@/styles/login.scss\";\n</style>\n"]}]}