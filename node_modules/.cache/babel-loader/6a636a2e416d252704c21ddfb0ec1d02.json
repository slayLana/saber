{"remainingRequest":"/Users/jiang/WorkSpace/bladex/saber/node_modules/babel-loader/lib/index.js!/Users/jiang/WorkSpace/bladex/saber/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jiang/WorkSpace/bladex/saber/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jiang/WorkSpace/bladex/saber/src/components/iframe/main.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jiang/WorkSpace/bladex/saber/src/components/iframe/main.vue","mtime":1666151205519},{"path":"/Users/jiang/WorkSpace/bladex/saber/babel.config.js","mtime":1666151205448},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/cache-loader/dist/cjs.js","mtime":1666157453018},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/babel-loader/lib/index.js","mtime":1666157453268},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/cache-loader/dist/cjs.js","mtime":1666157453018},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/vue-loader/lib/index.js","mtime":1666157454301}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport _defineProperty from \"/Users/jiang/WorkSpace/bladex/saber/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport { mapGetters } from \"vuex\";\nimport NProgress from \"nprogress\"; // progress bar\n\nimport \"nprogress/nprogress.css\"; // progress bar style\n\nexport default {\n  name: \"AvueIframe\",\n  data: function data() {\n    return {\n      urlPath: this.getUrlPath() //iframe src 路径\n\n    };\n  },\n  created: function created() {\n    NProgress.configure({\n      showSpinner: false\n    });\n  },\n  mounted: function mounted() {\n    this.load();\n    this.resize();\n  },\n  props: [\"routerPath\"],\n  watch: {\n    $route: function $route() {\n      this.load();\n    },\n    routerPath: function routerPath() {\n      // 监听routerPath变化，改变src路径\n      this.urlPath = this.getUrlPath();\n    }\n  },\n  computed: _objectSpread(_objectSpread({}, mapGetters([\"screen\"])), {}, {\n    src: function src() {\n      return this.$route.query.src ? this.$route.query.src.replace(\"$\", \"#\") : this.urlPath;\n    }\n  }),\n  methods: {\n    // 显示等待框\n    show: function show() {\n      NProgress.start();\n    },\n    // 隐藏等待狂\n    hide: function hide() {\n      NProgress.done();\n    },\n    // 加载浏览器窗口变化自适应\n    resize: function resize() {\n      var _this = this;\n\n      window.onresize = function () {\n        _this.iframeInit();\n      };\n    },\n    // 加载组件\n    load: function load() {\n      var _this2 = this;\n\n      this.show();\n      var flag = true; //URL是否包含问号\n\n      if (this.$route.query.src !== undefined && this.$route.query.src.indexOf(\"?\") === -1) {\n        flag = false;\n      }\n\n      var list = [];\n\n      for (var key in this.$route.query) {\n        if (key !== \"src\" && key !== \"name\" && key !== \"i18n\") {\n          list.push(\"\".concat(key, \"= this.$route.query[key]\"));\n        }\n      }\n\n      list = list.join(\"&\").toString();\n\n      if (flag) {\n        this.$route.query.src = \"\".concat(this.$route.query.src).concat(list.length > 0 ? \"&list\" : \"\");\n      } else {\n        this.$route.query.src = \"\".concat(this.$route.query.src).concat(list.length > 0 ? \"?list\" : \"\");\n      } //超时3s自动隐藏等待狂，加强用户体验\n\n\n      var time = 3;\n      var timeFunc = setInterval(function () {\n        time--;\n\n        if (time === 0) {\n          _this2.hide();\n\n          clearInterval(timeFunc);\n        }\n      }, 1000);\n      this.iframeInit();\n    },\n    //iframe窗口初始化\n    iframeInit: function iframeInit() {\n      var _this3 = this;\n\n      var iframe = this.$refs.iframe;\n      var clientHeight = document.documentElement.clientHeight - (screen > 1 ? 200 : 130);\n      if (!iframe) return;\n      iframe.style.height = \"\".concat(clientHeight, \"px\");\n\n      if (iframe.attachEvent) {\n        iframe.attachEvent(\"onload\", function () {\n          _this3.hide();\n        });\n      } else {\n        iframe.onload = function () {\n          _this3.hide();\n        };\n      }\n    },\n    getUrlPath: function getUrlPath() {\n      //获取 iframe src 路径\n      var url = window.location.href;\n      url = url.replace(\"/myiframe\", \"\");\n      return url;\n    }\n  }\n};",{"version":3,"mappings":";;;;;;;;;;;AASA;AACA,kC,CAAA;;AACA,iC,CAAA;;AACA;EACAA,kBADA;EAEAC,IAFA,kBAEA;IACA;MACAC,0BADA,CACA;;IADA;EAGA,CANA;EAOAC,OAPA,qBAOA;IACAC;MAAAC;IAAA;EACA,CATA;EAUAC,OAVA,qBAUA;IACA;IACA;EACA,CAbA;EAcAC,qBAdA;EAeAC;IACAC;MACA;IACA,CAHA;IAIAC;MACA;MACA;IACA;EAPA,CAfA;EAwBAC,0CACAC,sBADA;IAEAC,GAFA,iBAEA;MACA,+BACA,uCADA,GAEA,YAFA;IAGA;EANA,EAxBA;EAgCAC;IACA;IACAC,IAFA,kBAEA;MACAX;IACA,CAJA;IAKA;IACAY,IANA,kBAMA;MACAZ;IACA,CARA;IASA;IACAa,MAVA,oBAUA;MAAA;;MACAC;QACA;MACA,CAFA;IAGA,CAdA;IAeA;IACAC,IAhBA,kBAgBA;MAAA;;MACA;MACA,gBAFA,CAEA;;MACA;QACAC;MACA;;MACA;;MACA;QACA;UACAC;QACA;MACA;;MACAA;;MACA;QACA,gEACAA,8BADA;MAGA,CAJA,MAIA;QACA,gEACAA,8BADA;MAGA,CArBA,CAsBA;;;MACA;MACA;QACAC;;QACA;UACA;;UACAC;QACA;MACA,CANA,EAMA,IANA;MAOA;IACA,CAhDA;IAiDA;IACAC,UAlDA,wBAkDA;MAAA;;MACA;MACA,mBACAC,gEADA;MAEA;MACAC;;MACA;QACAA;UACA;QACA,CAFA;MAGA,CAJA,MAIA;QACAA;UACA;QACA,CAFA;MAGA;IACA,CAjEA;IAkEAC;MACA;MACA;MACAC;MACA;IACA;EAvEA;AAhCA","names":["name","data","urlPath","created","NProgress","showSpinner","mounted","props","watch","$route","routerPath","computed","mapGetters","src","methods","show","hide","resize","window","load","flag","list","time","clearInterval","iframeInit","document","iframe","getUrlPath","url"],"sourceRoot":"src/components/iframe","sources":["main.vue"],"sourcesContent":["<template>\n  <basic-container>\n    <iframe :src=\"src\"\n            class=\"iframe\"\n            ref=\"iframe\"></iframe>\n  </basic-container>\n</template>\n\n<script>\n  import {mapGetters} from \"vuex\";\n  import NProgress from \"nprogress\"; // progress bar\n  import \"nprogress/nprogress.css\"; // progress bar style\n  export default {\n    name: \"AvueIframe\",\n    data() {\n      return {\n        urlPath: this.getUrlPath() //iframe src 路径\n      };\n    },\n    created() {\n      NProgress.configure({showSpinner: false});\n    },\n    mounted() {\n      this.load();\n      this.resize();\n    },\n    props: [\"routerPath\"],\n    watch: {\n      $route: function () {\n        this.load();\n      },\n      routerPath: function () {\n        // 监听routerPath变化，改变src路径\n        this.urlPath = this.getUrlPath();\n      }\n    },\n    computed: {\n      ...mapGetters([\"screen\"]),\n      src() {\n        return this.$route.query.src\n          ? this.$route.query.src.replace(\"$\", \"#\")\n          : this.urlPath;\n      }\n    },\n    methods: {\n      // 显示等待框\n      show() {\n        NProgress.start();\n      },\n      // 隐藏等待狂\n      hide() {\n        NProgress.done();\n      },\n      // 加载浏览器窗口变化自适应\n      resize() {\n        window.onresize = () => {\n          this.iframeInit();\n        };\n      },\n      // 加载组件\n      load() {\n        this.show();\n        var flag = true; //URL是否包含问号\n        if (this.$route.query.src !== undefined && this.$route.query.src.indexOf(\"?\") === -1) {\n          flag = false;\n        }\n        var list = [];\n        for (var key in this.$route.query) {\n          if (key !== \"src\" && key !== \"name\" && key !== \"i18n\") {\n            list.push(`${key}= this.$route.query[key]`);\n          }\n        }\n        list = list.join(\"&\").toString();\n        if (flag) {\n          this.$route.query.src = `${this.$route.query.src}${\n            list.length > 0 ? `&list` : \"\"\n          }`;\n        } else {\n          this.$route.query.src = `${this.$route.query.src}${\n            list.length > 0 ? `?list` : \"\"\n          }`;\n        }\n        //超时3s自动隐藏等待狂，加强用户体验\n        let time = 3;\n        const timeFunc = setInterval(() => {\n          time--;\n          if (time === 0) {\n            this.hide();\n            clearInterval(timeFunc);\n          }\n        }, 1000);\n        this.iframeInit();\n      },\n      //iframe窗口初始化\n      iframeInit() {\n        const iframe = this.$refs.iframe;\n        const clientHeight =\n          document.documentElement.clientHeight - (screen > 1 ? 200 : 130);\n        if (!iframe) return;\n        iframe.style.height = `${clientHeight}px`;\n        if (iframe.attachEvent) {\n          iframe.attachEvent(\"onload\", () => {\n            this.hide();\n          });\n        } else {\n          iframe.onload = () => {\n            this.hide();\n          };\n        }\n      },\n      getUrlPath: function () {\n        //获取 iframe src 路径\n        let url = window.location.href;\n        url = url.replace(\"/myiframe\", \"\");\n        return url;\n      }\n    }\n  };\n</script>\n\n<style lang=\"scss\">\n  .iframe {\n    width: 100%;\n    height: 100%;\n    border: 0;\n    overflow: hidden;\n    box-sizing: border-box;\n  }\n</style>\n"]}]}