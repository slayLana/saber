{"remainingRequest":"/Users/jiang/WorkSpace/bladex/saber/node_modules/babel-loader/lib/index.js!/Users/jiang/WorkSpace/bladex/saber/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/jiang/WorkSpace/bladex/saber/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/jiang/WorkSpace/bladex/saber/src/page/index/search.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/jiang/WorkSpace/bladex/saber/src/page/index/search.vue","mtime":1666151205525},{"path":"/Users/jiang/WorkSpace/bladex/saber/babel.config.js","mtime":1666151205448},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/cache-loader/dist/cjs.js","mtime":1666157453018},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/babel-loader/lib/index.js","mtime":1666157453268},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/cache-loader/dist/cjs.js","mtime":1666157453018},{"path":"/Users/jiang/WorkSpace/bladex/saber/node_modules/vue-loader/lib/index.js","mtime":1666157454301}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.function.name\";\nimport _defineProperty from \"/Users/jiang/WorkSpace/bladex/saber/node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport config from \"./sidebar/config.js\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  data: function data() {\n    return {\n      config: config,\n      value: \"\",\n      menus: [],\n      menuList: []\n    };\n  },\n  created: function created() {\n    this.getMenuList();\n  },\n  watch: {\n    value: function value() {\n      this.querySearch();\n    },\n    menu: function menu() {\n      this.getMenuList();\n    }\n  },\n  computed: _objectSpread({\n    labelKey: function labelKey() {\n      return this.website.menu.props.label || this.config.propsDefault.label;\n    },\n    pathKey: function pathKey() {\n      return this.website.menu.props.path || this.config.propsDefault.path;\n    },\n    iconKey: function iconKey() {\n      return this.website.menu.props.icon || this.config.propsDefault.icon;\n    },\n    childrenKey: function childrenKey() {\n      return this.website.menu.props.children || this.config.propsDefault.children;\n    }\n  }, mapGetters([\"menu\", \"website\"])),\n  methods: {\n    handleEsc: function handleEsc() {\n      this.$parent.isSearch = false;\n    },\n    getMenuList: function getMenuList() {\n      var _this = this;\n\n      var findMenu = function findMenu(list) {\n        for (var i = 0; i < list.length; i++) {\n          var ele = Object.assign({}, list[i]);\n\n          if (_this.validatenull(ele[_this.childrenKey])) {\n            _this.menuList.push(ele);\n          } else {\n            findMenu(ele[_this.childrenKey]);\n          }\n        }\n      };\n\n      this.menuList = [];\n      findMenu(this.menu);\n      this.menus = this.menuList;\n    },\n    querySearch: function querySearch() {\n      var restaurants = this.menuList;\n      var queryString = this.value;\n      this.menus = queryString ? this.menuList.filter(this.createFilter(queryString)) : restaurants;\n    },\n    createFilter: function createFilter(queryString) {\n      return function (restaurant) {\n        return restaurant.name.toLowerCase().indexOf(queryString.toLowerCase()) === 0;\n      };\n    },\n    handleSelect: function handleSelect(item) {\n      this.handleEsc();\n      this.value = \"\";\n      this.$router.push({\n        path: this.$router.$avueRouter.getPath({\n          name: item[this.labelKey],\n          src: item[this.pathKey]\n        }, item.meta),\n        query: item.query\n      });\n    }\n  }\n};",{"version":3,"mappings":";;;;;;;;;;AAmCA;AACA;AAEA;EACAA,IADA,kBACA;IACA;MACAC,cADA;MAEAC,SAFA;MAGAC,SAHA;MAIAC;IAJA;EAMA,CARA;EASAC,OATA,qBASA;IACA;EACA,CAXA;EAYAC;IACAJ,KADA,mBACA;MACA;IACA,CAHA;IAIAK,IAJA,kBAIA;MACA;IACA;EANA,CAZA;EAoBAC;IACAC,QADA,sBACA;MACA;IACA,CAHA;IAIAC,OAJA,qBAIA;MACA;IACA,CANA;IAOAC,OAPA,qBAOA;MACA;IACA,CATA;IAUAC,WAVA,yBAUA;MACA,OACA,qEADA;IAGA;EAdA,GAeAC,+BAfA,CApBA;EAqCAC;IACAC,SADA,uBACA;MACA;IACA,CAHA;IAIAC,WAJA,yBAIA;MAAA;;MACA;QACA;UACA;;UACA;YACA;UACA,CAFA,MAEA;YACAC;UACA;QACA;MACA,CATA;;MAUA;MACAA;MACA;IACA,CAlBA;IAmBAC,WAnBA,yBAmBA;MACA;MACA;MACA,2BACA,oDADA,GAEAC,WAFA;IAGA,CAzBA;IA0BAC,YA1BA,wBA0BAC,WA1BA,EA0BA;MACA;QACA,OACAC,qEACA,CAFA;MAIA,CALA;IAMA,CAjCA;IAkCAC,YAlCA,wBAkCAC,IAlCA,EAkCA;MACA;MACA;MACA;QACAC;UACAC,yBADA;UAEAC;QAFA,GAGAH,SAHA,CADA;QAKAI;MALA;IAOA;EA5CA;AArCA","names":["data","config","value","menus","menuList","created","watch","menu","computed","labelKey","pathKey","iconKey","childrenKey","mapGetters","methods","handleEsc","getMenuList","findMenu","querySearch","restaurants","createFilter","queryString","restaurant","handleSelect","item","path","name","src","query"],"sourceRoot":"src/page/index","sources":["search.vue"],"sourcesContent":["<template>\n  <div class=\"avue-searchs\"\n       @click.self=\"handleEsc\">\n    <div class=\"avue-searchs__title\">菜单搜索</div>\n    <div class=\"avue-searchs__content\">\n      <div class=\"avue-searchs__form\">\n        <el-input :placeholder=\"$t('search')\"\n                  v-model=\"value\"\n                  @keydown.esc.native=\"handleEsc\">\n          <el-button slot=\"append\"\n                     icon=\"el-icon-search\"></el-button>\n        </el-input>\n        <p>\n          <el-tag>你可以使用快捷键esc 关闭</el-tag>\n        </p>\n      </div>\n      <div class=\"avue-searchs__list\">\n        <el-scrollbar class=\"avue-searchs__scrollbar\">\n          <div class=\"avue-searchs__item\"\n               v-for=\"(item,index) in menus\"\n               :key=\"index\"\n               @click=\"handleSelect(item)\">\n            <i :class=\"[item[iconKey],'avue-searchs__item-icon']\"></i>\n            <span class=\"avue-searchs__item-title\">{{item[labelKey]}}</span>\n            <div class=\"avue-searchs__item-path\">\n              {{item[pathKey]}}\n            </div>\n          </div>\n        </el-scrollbar>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  import config from './sidebar/config.js'\n  import {mapGetters} from \"vuex\";\n\n  export default {\n    data() {\n      return {\n        config: config,\n        value: \"\",\n        menus: [],\n        menuList: []\n      }\n    },\n    created() {\n      this.getMenuList();\n    },\n    watch: {\n      value() {\n        this.querySearch();\n      },\n      menu() {\n        this.getMenuList();\n      }\n    },\n    computed: {\n      labelKey() {\n        return this.website.menu.props.label || this.config.propsDefault.label;\n      },\n      pathKey() {\n        return this.website.menu.props.path || this.config.propsDefault.path;\n      },\n      iconKey() {\n        return this.website.menu.props.icon || this.config.propsDefault.icon;\n      },\n      childrenKey() {\n        return (\n          this.website.menu.props.children || this.config.propsDefault.children\n        );\n      },\n      ...mapGetters([\"menu\", \"website\"])\n    },\n    methods: {\n      handleEsc() {\n        this.$parent.isSearch = false;\n      },\n      getMenuList() {\n        const findMenu = list => {\n          for (let i = 0; i < list.length; i++) {\n            const ele = Object.assign({}, list[i]);\n            if (this.validatenull(ele[this.childrenKey])) {\n              this.menuList.push(ele);\n            } else {\n              findMenu(ele[this.childrenKey]);\n            }\n          }\n        };\n        this.menuList = [];\n        findMenu(this.menu);\n        this.menus = this.menuList;\n      },\n      querySearch() {\n        var restaurants = this.menuList;\n        var queryString = this.value\n        this.menus = queryString\n          ? this.menuList.filter(this.createFilter(queryString))\n          : restaurants;\n      },\n      createFilter(queryString) {\n        return restaurant => {\n          return (\n            restaurant.name.toLowerCase().indexOf(queryString.toLowerCase()) ===\n            0\n          );\n        };\n      },\n      handleSelect(item) {\n        this.handleEsc();\n        this.value = \"\";\n        this.$router.push({\n          path: this.$router.$avueRouter.getPath({\n            name: item[this.labelKey],\n            src: item[this.pathKey]\n          }, item.meta),\n          query: item.query\n        });\n      }\n    }\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  .avue-searchs {\n    padding-top: 50px;\n    width: 100%;\n    height: 100%;\n    background-color: #fff;\n    z-index: 1024;\n\n    &__title {\n      margin-bottom: 60px;\n      text-align: center;\n      font-size: 42px;\n      font-weight: bold;\n      letter-spacing: 2px;\n      text-indent: 2px;\n    }\n\n    &__form {\n      margin: 0 auto 50px auto;\n      width: 50%;\n      text-align: center;\n\n      p {\n        margin-top: 20px;\n      }\n    }\n\n    &__scrollbar {\n      height: 400px;\n    }\n\n    &__list {\n      box-sizing: border-box;\n      padding: 20px 30px;\n      margin: 0 auto;\n      width: 70%;\n      border-radius: 4px;\n      border: 1px solid #ebeef5;\n      background-color: #fff;\n      overflow: hidden;\n      color: #303133;\n      transition: 0.3s;\n      box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n    }\n\n    &__item {\n      padding: 5px 0;\n      border-bottom: 1px dashed #eee;\n\n      &-icon {\n        margin-right: 5px;\n        font-size: 18px;\n      }\n\n      &-title {\n        font-size: 20px;\n        font-weight: 500;\n        color: #333;\n      }\n\n      &-path {\n        line-height: 30px;\n        color: #666;\n      }\n    }\n  }\n</style>\n"]}]}